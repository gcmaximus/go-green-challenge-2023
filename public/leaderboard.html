<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--CSS-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


    <link rel="stylesheet" href="/style/leaderboard.css">


    <!--bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <!-- poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet" />

    <title>Leaderboard</title>

    <!-- icon --> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body>
    <header>
        <!--Navbar-->
        <nav>
            <section class="top-nav">
                <div>
                    <img src="/img/logo.png" alt="Go-Green Challenge 2023" id="navbar-logo" />
                    <span hidden id="display">
                        <!-- Display Username and Points-->
                        <span id="usernameDisplay"></span>: <span id="totalScoreDisplay"></span> points
                    </span>
                </div>
                <input id="menu-toggle" type="checkbox" />
                <label class="menu-button-container" for="menu-toggle">
                    <div class="menu-button"></div>
                </label>
                <ul class="menu">
                    <li><a href="/">Home</a></li>
                    <li><a href="/leaderboard.html">Leaderboard & Prizes</a></li>
                    <li><a href="/ongoing-challenge.html">Ongoing Challenges</a></li>
                    <li><a href="/past-challenges.html">Past Challenges</a></li>
                    <li><a href="/about-us.html">About Us</a></li>
                    <li hidden id="signOutButton"><button>
                        <i class="fa fa-sign-out" style="font-size:24px"></i>
                    </button></li>
                    <li id="signInPageButton"><a href="/login.html">Sign In</a></li>
                </ul>
            </section>
        </nav>
    </header>
    <div class="hero-banner">
        <div class="hero-banner1">Leaderboard & Prizes</div>
        <div class="hero-banner2">Go-Green Challenge</div>

            <div class="toggle-margin">
                <div class="switch-button">
                    <input class="switch-button-checkbox" type="checkbox"></input>
                    <label class="switch-button-label" for=""><span class="switch-button-label-span">Prizes</span></label>
                </div>
            </div>

    </div>


    
    <div class="ONE active">
        <div class="section-1">
            <div class="pc-container-prize">
                <div class="row">
                    <div class="col-4">
                        <div class="prize2">
                            <div class="bg-prize2"></div>
                            <div class="prize2-header">Prize 2</div>
                            <div class="prize-description">Description</div>
                            <div class="prize2-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Sapiente ipsum non odit dolores vel eum, incidunt aut porro totam dolore minus id itaque! Tempora, accusantium!</div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="prize1">
                            <div class="bg-prize1"></div>
                            <div class="prize1-header">Prize 1</div>
                            <div class="prize-description">Description</div>
                            <div class="prize1-content">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quaerat dolore doloribus aperiam, quam esse voluptas harum amet itaque magnam labore?</div>
        
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="prize3">
                            <div class="bg-prize3"></div>
                            <div class="prize3-header">Prize 3</div>
                            <div class="prize-description">Description</div>
                            <div class="prize3-content">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ipsa, ratione fugit at corporis iusto veritatis quod dolor quia ea rerum odio illum, magni deserunt esse aspernatur. Quam voluptatum accusamus quae.</div>
                        </div>
                    </div>
                </div>
        
                <div class="seperator"></div>
            </div>
        </div>
        <div class="section-3">
            <div class="seperator"></div>
            <div class="card">
              <img class="card-img-top" src="/img/prize1.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title mobile-header-prize">First Prize</h5>
                <p class="card-text mobile-content-prize">Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis sunt id illo quas libero excepturi, repellat nesciunt unde! Quisquam laboriosam quidem doloremque quod placeat alias.</p>
              </div>
            </div>
    
            <div class="seperator"></div>
            <div class="card">
              <img class="card-img-top" src="/img/prize2.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title mobile-header-prize">Second Prize</h5>
                <p class="card-text mobile-content-prize">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Maxime pariatur, atque sapiente laboriosam consequuntur ut officia non sunt cum facere? Ipsum rem quidem placeat soluta tempora nostrum est cumque alias.</p>
              </div>
            </div>
    
            <div class="seperator"></div>
            <div class="card">
              <img class="card-img-top" src="./img/prize3.jpg" alt="Card image cap">
              <div class="card-body">
                <h5 class="card-title mobile-header-prize">Third Prize</h5>
                <p class="card-text mobile-content-prize">Lorem ipsum dolor sit amet consectetur adipisicing elit. Reprehenderit, tempore. Maxime perferendis illo nulla mollitia natus consequatur explicabo, quas ea aut? Doloremque quidem explicabo aliquid.</p>
              </div>
            </div>
        </div>
    </div>

    <div class="TWO">
        <div class="section-2">
            <div class="pc-container-leaderboard">
                <div class="overall-top3">
                    <div class="row ">
                        <div class="col-3">
                            <div class="top2-profile">
                                <div class="justify-center">
                                    <img src="/img/person.png" alt="">
                                </div>
                                <div class="place">2nd</div>
        
                                <div class="username-container">
                                    <div class="placeholder-username">Username:</div>
                                    <div class="username">Ah Huat Bai Ka Fei</div>
                                </div>
        
                                <div class="score my-2">8,821 POINTS</div>
        
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="top1-profile">
                                <div class="justify-center">
                                    <img src="/img/person.png" alt="">
                                </div>
                                <div class="place">1st</div>
        
                                <div class="username-container">
                                    <div class="placeholder-username">Username:</div>
                                    <div class="username">Bernard Tang</div>
                                </div>
        
                                <div class="score my-2">10,921 POINTS</div>
        
                            </div>
                        </div>
        
                        <div class="col-3">
                            <div class="top3-profile">
                                <div class="justify-center">
                                    <img src="/img/person.png" alt="">
                                </div>
                                <div class="place">3rd</div>
                                <div class="username-container">
                                    <div class="placeholder-username">Username:</div>
                                    <div class="username">Sir Karl Kwan</div>
                                </div>
        
                                <div class="score my-2">5,321 POINTS</div>
                            </div>
        
                        </div>
                    </div>
                </div>
        
                <div class="overall-contianer">
                    <div class="seperator"></div>
                    <button type="button" class="collapsible">Overall Leaderboards</button>
                    <div class="content">
                        <div class="row first">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="OverallFirstName">Username: Bernard Tang</div>
                            <div class="col-4" id="OverallFirstScore">Points: 10,921</div>
                        </div>
            
                        <div class="row">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="OverallSecondName">Username: Ah Huat Bai Ka Fei</div>
                            <div class="col-4" id="OverallSecondScore">Points: 8,821</div>
                        </div>
            
                        <div class="row">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="OverallThirdName">Username: Sir Karl Kwan</div>
                            <div class="col-4" id="OverallThirdName">Points: 5,321</div>
                        </div>
                    </div>
        
                    <br>
        
                    <button type="button" class="collapsible">Week #3 Challenge</button>
                    <div class="content">
                        <div class="row first">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="week3FirstName">Username: Bernard Tang</div>
                            <div class="col-4" id="week3FirstScore">Points: 10,921</div>
                        </div>
            
                        <div class="row">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="week3SecondName">Username: Ah Huat Bai Ka Fei</div>
                            <div class="col-4" id="week3SecondScore">Points: 8,821</div>
                        </div>
            
                        <div class="row">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="week3ThirdName">Username: Sir Karl Kwan</div>
                            <div class="col-4" id="week3ThirdScore">Points: 5,321</div>
                        </div>
                    </div>
        
                    <br>
        
                    <button type="button" class="collapsible">Week #2 Challenge</button>
                    <div class="content">
                        <div class="row first">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="week2FirstName">Username: Bernard Tang</div>
                            <div class="col-4" id="week2FirstScore">Points: 10,921</div>
                        </div>
            
                        <div class="row">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="week2SecondName">Username: Ah Huat Bai Ka Fei</div>
                            <div class="col-4" id="week2SecondScore">Points: 8,821</div>
                        </div>
            
                        <div class="row">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="week2ThirdName">Username: Sir Karl Kwan</div>
                            <div class="col-4" id="week2ThirdScore">Points: 5,321</div>
                        </div>
                    </div>
        
                    <br>
        
                    <button type="button" class="collapsible">Week #1 Challenge</button>
                    <div class="content">
                        <div class="row first">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="week1FirstName">Username: Bernard Tang</div>
                            <div class="col-4" id="week1FirstScore">Points: 10,921</div>
                        </div>
                        
                        <div class="row">
                            <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                            <div class="col-5" id="week1SecondName">Username: Ah Huat Bai Ka Fei</div>
                            <div class="col-4" id="week1SecondScore">Points: 8,821</div>
                        </div>
    
                        <div class="row">
                            <div class="col-3 pfp my-1"><img src="/img/person.png" alt=""></div>
                            <div class="col-5" id="week1ThirdName">Username: Sir Karl Kwan</div>
                            <div class="col-4" id="week1ThirdScore">Points: 5,321</div>
                        </div>
                    </div>
                </div>
        
                <div class="seperator"></div>
        
            </div>
        </div>
        <div class="section44">
            <div class="section-4-bg">
                <div class="section-4">
                    <div class="profile">
                    <div class="person second">
                        <div class="num">2nd</div>
                        <i class="fas fa-caret-up"></i>
                        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="" class="photo">
                        <p class="link">@Ah huat</p>
                        <p class="points">8,821</p>
                    </div>
                    <div class="person first">
                        <div class="num">1st</div>
                        <i class="fas fa-crown"></i>
                        <img src="https://cdn-icons-png.flaticon.com/512/4140/4140048.png" alt="" class="photo main">
                        <p class="link">@Bernard Tang</p>
                        <p class="points">10,921</p>
                    </div>
                    <div class="person third">
                        <div class="num">3rd</div>
                        <i class="fas fa-caret-up"></i>
                        <img src="https://cdn-icons-png.flaticon.com/512/2922/2922561.png" alt="" class="photo">
                        <p class="link">@Karl Kwan</p>
                        <p class="points">5,321</p>
                    </div>
                    </div>
        
                </div>
            </div>

            <div class="overall-contianer mx-3">
                <div class="seperator"></div>
                <button type="button" class="collapsible">Overall Leaderboards</button>
                <div class="content">
                    <div class="row first">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="OverallFirstName">Username: Bernard Tang</div>
                        <div class="col-4" id="OverallFirstScore">Points: 10,921</div>
                    </div>
        
                    <div class="row">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="OverallSecondName">Username: Ah Huat Bai Ka Fei</div>
                        <div class="col-4" id="OverallSecondScore">Points: 8,821</div>
                    </div>
        
                    <div class="row">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="OverallThirdName">Username: Sir Karl Kwan</div>
                        <div class="col-4" id="OverallThirdName">Points: 5,321</div>
                    </div>
                </div>

                <br>

                <button type="button" class="collapsible">Week #3 Challenge</button>
                <div class="content">
                    <div class="row first">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="week3FirstName">Username: Bernard Tang</div>
                        <div class="col-4" id="week3FirstScore">Points: 10,921</div>
                    </div>
        
                    <div class="row">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="week3SecondName">Username: Ah Huat Bai Ka Fei</div>
                        <div class="col-4" id="week3SecondScore">Points: 8,821</div>
                    </div>
        
                    <div class="row">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="week3ThirdName">Username: Sir Karl Kwan</div>
                        <div class="col-4" id="week3ThirdScore">Points: 5,321</div>
                    </div>
                </div>

                <br>

                <button type="button" class="collapsible">Week #2 Challenge</button>
                <div class="content">
                    <div class="row first">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="week2FirstName">Username: Bernard Tang</div>
                        <div class="col-4" id="week2FirstScore">Points: 10,921</div>
                    </div>
        
                    <div class="row">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="week2SecondName">Username: Ah Huat Bai Ka Fei</div>
                        <div class="col-4" id="week2SecondScore">Points: 8,821</div>
                    </div>
        
                    <div class="row">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="week2ThirdName">Username: Sir Karl Kwan</div>
                        <div class="col-4" id="week2ThirdScore">Points: 5,321</div>
                    </div>
                </div>

                <br>

                <button type="button" class="collapsible">Week #1 Challenge</button>
                <div class="content">
                    <div class="row first">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="week1FirstName">Username: Bernard Tang</div>
                        <div class="col-4" id="week1FirstScore">Points: 10,921</div>
                    </div>
                    
                    <div class="row">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="week1SecondName">Username: Ah Huat Bai Ka Fei</div>
                        <div class="col-4" id="week1SecondScore">Points: 8,821</div>
                    </div>

                    <div class="row">
                        <div class="col-3 pfp my-1"><img src="./img/person.png" alt=""></div>
                        <div class="col-5" id="week1ThirdName">Username: Sir Karl Kwan</div>
                        <div class="col-4" id="week1ThirdScore">Points: 5,321</div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="seperator"></div>
    <div class="footer-dark">
        <footer>
            <div class="container">
                <div class="row footer-text">
                    <h3>Go-Green Challenge</h3>
                    <p>
                        Join us in going green for the sake of our environment!
                    </p>
                </div>
                <div class="col item social">


                    <!-- Instagram -->
                    <span class="indiv-social">
                        <a target="_blank" href="https://www.instagram.com/thewontedproject/">
                            <i class="fa fa-instagram"></i>
                        </a>
                        <span>@thewontedproject</span>
                        <br class="show-mobile">
                    </span>

                    <!-- Email -->
                    <span class="indiv-social">
                        <a><i class="fa fa-envelope"></i></a>
                        <span>GoGreenChallenge2023@gmail.com</span>
                        <br class="show-mobile">
                    </span>

                    <!-- Address -->
                    <span class="indiv-social">
                        <a><i class="fa fa-home"></i></a>
                        <span>500 Dover Road Singapore 139651</span>
                        <br class="show-mobile">
                    </span>
                    <!-- Telephone No. -->
                    <span class="indiv-social">
                        <a><i class="fa fa-phone"></i></a>
                        <span>+65 9999 9999</span>
                        <br class="show-mobile">
                    </span>

                </div>
                <div>
                    <p class="copyright">GoGreenChallenge © 2023</p>
                </div>
            </div>
        </footer>
    </div>

























    <!-- for prize height set -->
	<script>
		window.onload = function() {
			// Get the elements and their heights
			var prize1 = document.querySelector('.prize1-content');
			var prize2 = document.querySelector('.prize2-content');
			var prize3 = document.querySelector('.prize3-content');
			var prize1Height = prize1.offsetHeight;
			var prize2Height = prize2.offsetHeight;
			var prize3Height = prize3.offsetHeight;

			// Find the maximum height among them
			var maxHeight = Math.max(prize1Height, prize2Height, prize3Height);

			// Set the min-height of all elements to the maximum height
			prize1.style.minHeight = maxHeight + 10 +  'px';
			prize2.style.minHeight = maxHeight + 'px';
			prize3.style.minHeight = maxHeight + 'px';
		}
	</script>

    <!-- for expanding leaderboard div -->
    <script>
        var coll = document.getElementsByClassName("collapsible");
        var i;
        
        for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active1");
            var content = this.nextElementSibling;
            if (content.style.maxHeight){
            content.style.maxHeight = null;
            } else {
            content.style.maxHeight = content.scrollHeight + "px";
            } 
        });
        }
    </script>



    <script>
        const switchButtonCheckbox = document.querySelector('.switch-button-checkbox');
        const section1 = document.querySelector('.ONE');
        const section2 = document.querySelector('.TWO');



        switchButtonCheckbox.addEventListener('change', function() {
        if (this.checked) {
            section1.classList.remove('active');
            section2.classList.add('active');
            
        } else {
            section2.classList.remove('active');
            section1.classList.add('active');
        }
        });
    </script>









    <!--bootstrap-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
        integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
        crossorigin="anonymous"></script>
    
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import {
            getAuth,
            onAuthStateChanged,
            signOut
        } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";
        import {
            getFirestore,
            collection,
            doc,
            getDoc,
            getDocs,
            query,
            limit,
            orderBy,
        } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";
        const firebaseConfig = {
            apiKey: "AIzaSyDQ4klRjnWy9N_HTvffLRChaR9f6aTx5xA",
            authDomain: "go-green-challenge.firebaseapp.com",
            projectId: "go-green-challenge",
            storageBucket: "go-green-challenge.appspot.com",
            messagingSenderId: "586047303749",
            appId: "1:586047303749:web:73a742cbefa66c0fbd732c",
            measurementId: "G-5WNGZ08ND0",
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app)

        // sign out button and username element
        let signInPageButton = document.querySelector("#signInPageButton")
        let signOutButton = document.querySelector("#signOutButton");
        let usernameDisplay = document.querySelector("#usernameDisplay");
        let totalScoreDisplay =
            document.querySelector("#totalScoreDisplay");
        let display = document.querySelector("#display");

        // Unhide sign out button and add username
        onAuthStateChanged(auth, (user) => {
            if (user) {
                signInPageButton.hidden = true;
                signOutButton.hidden = false;
                usernameDisplay.textContent = user.displayName;
                getDoc(doc(db, "scores", user.uid))
                    .then((docSnap) => {
                        totalScoreDisplay.textContent = docSnap.data().totalScore;
                        display.hidden = false;
                    })
                    .catch((error) => {
                        alert(
                            `Error code: ${error.code}\nError message: ${error.message}`
                        );
                    });
            }
        });

        // Sign out
        signOutButton.addEventListener("click", (e) => {
            e.preventDefault();
            signOut(auth)
                .then(() => {
                    location.assign("/");
                })
                .catch((error) => {
                    alert(
                        `Error code: ${error.code}\nError message: ${error.message}`
                    );
                    location.reload();
                });
        });

        // week 1 to 4 scores
        let posList = ["First", "Second", "Third"];
        for (let weekNum = 1; i < 5; i++) {
            getDocs(
                query(
                    collection(db, "scores"),
                    orderBy(`week${weekNum}.week${weekNum}TotalScore`, "desc"),
                    limit(3)
                )
            )
                .then((snapshot) => {
                    snapshot.forEach((doc, index) => {
                        let data = doc.data();
                        let weekAndPos = weekNum + posList[index];
                        document.querySelector(`week${weekAndPos}Name`).textContent =
                            data.displayName;
                        document.querySelector(`week${weekAndPos}Score`).textContent =
                            data[`week${weekNum}TotalScore`];
                    });
                })
                .catch((error) => {
                    alert(`Error code: ${error.code}\nError message: ${error.message}`);
                });
        }

        // overall scores
        getDocs(
            query(collection(db, "scores"), orderBy("totalScore", "desc"), limit(3))
        )
            .then((snapshot) => {
                snapshot.forEach((doc, index) => {
                    let data = doc.data();
                    let pos = posList[index];
                    document.querySelector(`overall${pos}Name`).textContent =
                        data.displayName;
                    document.querySelector(`overall${pos}Score`).textContent =
                        data.totalScore;
                });
            })
            .catch((error) => {
                alert(`Error code: ${error.code}\nError message: ${error.message}`);
            });
        </script>
</body>

</html>